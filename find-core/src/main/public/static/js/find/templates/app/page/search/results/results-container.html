<% var promoted = promotion ? 'promoted-document' : ''; %>

<div class="main-results-container m-b-sm <%-promoted%>" data-rel="results" data-cid="<%-cid %>">
    <span class="pull-left m-t-xs text-muted m-r-sm content-type">
        <i class="icomoon-file-<%-contentType%>"></i>
    </span>

    <div class="results-contents">
        <% if (promotion) { %>
            <span class="pull-right m-t-xs text-muted promoted-label">
                <i class="hp-icon hp-fw hp-favorite"></i> Promoted
            </span>
        <% } %>
        <h4 class="pull-left m-b-nil m-t-xs result-header"><%- title %></h4>
        <span class="document-reference shorten"><%-reference %></span>
        <% if(thumbnail) { %>
            <img class="document-thumbnail m-r-sm pull-left" src="data:image/jpeg;base64,<%=thumbnail%>"/>
        <% } %>
        <p class="result-summary">
            <%= summary %>
        </p>
        <div class="document-date">
            <span>Database:&nbsp<%-index %></span>&nbsp;&nbsp;
            <span>Date:&nbsp<%- date %></span>&nbsp;&nbsp;
            <span>Tag:&nbsp<img class="tagButton" data-cid="<%-cid %>" ><ul class="singleFieldTags" style="display: none;" id="<%-cid %>"></ul></span>
        </div>
        <script>
            $(function() {
                var sampleTags = ['c++', 'java', 'php', 'coldfusion', 'javascript', 'asp'];
                $('.singleFieldTags').tagit({
                    availableTags: sampleTags
                });
                var eventTags = $('#eventTags');

                var addEvent = function (text) {
                    $('#events_container').append(text + '<br>');
                };

                eventTags.tagit({
                    availableTags: sampleTags,
                    beforeTagAdded: function (evt, ui) {
                        if (!ui.duringInitialization) {
                            addEvent('beforeTagAdded: ' + eventTags.tagit('tagLabel', ui.tag));
                        }
                    },
                    afterTagAdded: function (evt, ui) {
                        if (!ui.duringInitialization) {
                            addEvent('afterTagAdded: ' + eventTags.tagit('tagLabel', ui.tag));
                        }
                    },
                    beforeTagRemoved: function (evt, ui) {
                        addEvent('beforeTagRemoved: ' + eventTags.tagit('tagLabel', ui.tag));
                    },
                    afterTagRemoved: function (evt, ui) {

                        addEvent('afterTagRemoved: ' + eventTags.tagit('tagLabel', ui.tag));

                    },

                    onTagClicked: function (evt, ui) {
                        addEvent('onTagClicked: ' + eventTags.tagit('tagLabel', ui.tag));
                    },
                    onTagExists: function (evt, ui) {
                        addEvent('onTagExists: ' + eventTags.tagit('tagLabel', ui.existingTag));
                    }
                })
            });

        </script>

        <p class="text-right">
            <% if (!staticPromotion) { %>
                <a class="similar-documents-trigger result-container-control" role="button" tabindex="-1"><%-i18n['search.similarDocuments']%></a>
            <% } %>
        </p>
    </div>
</div>
